grammar Math
  rule top
    math_exp
  end

  rule naked_exp
    primary (op math_exp)* <Extract::Tree::Math>
  end

  rule paren_exp
    "(" math_exp ")" <Extract::Tree::ParenMath> 
  end

  rule math_exp 
    (paren_exp / naked_exp) (op math_exp)* <Extract::Tree::Math>
  end



  rule num
    [0-9]+ <Extract::Tree::Num>
  end

  rule op
    ("+" / "-" / "*" / "/") <Extract::Tree::Operator>
  end

  rule primary
    num
  end
end

